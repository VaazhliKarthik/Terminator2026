{"mode":"Text","hardwareTarget":"brain","textContent":"#region VEXcode Generated Robot Configuration\nfrom vex import *\nimport urandom\nimport math\n\n# Brain should be defined by default\nbrain=Brain()\n\n# Robot configuration code\n\n\n# wait for rotation sensor to fully initialize\nwait(30, MSEC)\n\n\n# Make random actually random\ndef initializeRandomSeed():\n    wait(100, MSEC)\n    random = brain.battery.voltage(MV) + brain.battery.current(CurrentUnits.AMP) * 100 + brain.timer.system_high_res()\n    urandom.seed(int(random))\n      \n# Set random seed \ninitializeRandomSeed()\n\n\ndef play_vexcode_sound(sound_name):\n    # Helper to make playing sounds from the V5 in VEXcode easier and\n    # keeps the code cleaner by making it clear what is happening.\n    print(\"VEXPlaySound:\" + sound_name)\n    wait(5, MSEC)\n\n# add a small delay to make sure we don't print in the middle of the REPL header\nwait(200, MSEC)\n# clear the console to make sure we don't have the REPL in the console\nprint(\"\\033[2J\")\n\n#endregion VEXcode Generated Robot Configuration\n\n# ------------------------------------------\n# \n# \tProject:      VEXcode Project\n#\tAuthor:       VEX\n#\tCreated:\n#\tDescription:  VEXcode V5 Python Project\n# \n# ------------------------------------------\n\n# Library imports\nfrom vex import *\n\n# Begin project code\n#from vex import *\n#global log_file\n\nbrain = Brain()\n# This force-checks the SD card hardware\nif brain.sdcard.is_inserted():\n    print(\"SD Card Detected\")\nelse:\n    print(\"SD Card NOT Detected - Check Format\")\n\n\n\n\n#import os\n#from vex import *\n\n# Function to find the next available filename\ndef get_new_filename():\n    n = 1\n    while True:\n        filename = \"log_\" + str(n) + \".csv\"\n        try:\n            # Check if file exists by trying to open it\n            #with open(filename, \"r\"):\n            n += 1 # If it opens, it exists, so try the next number\n            if not brain.sdcard.exists(filename):\n                print(\"file DO NOT exists: \",filename)\n                brain.sdcard.savefile(filename,bytearray(\"VEX\"))\n\n                return filename \n            else:\n                print(\"file exists: \",filename)\n                continue\n        except OSError:\n            # If it fails to open, the file doesn't exist. Use this name!\n            #print(\"There is an error: \",filename)\n            return filename\n\ndef log_data_raw(filename):\n    # 1. Create the data string\n    t = brain.timer.time(SECONDS)\n    #j1 = controller_1.axis1.position()\n    #j2 = controller_1.axis2.position()\n\n    #v = motor.velocity(RPM)\n    j = 10.0\n    v = 20.0\n\n    # Formatting to a CSV-style string\n    data_str = \"{:.2f},{:.2f},{:.2f}\\n\".format(t, j, v)\n    \n    # 2. Convert string to a byte buffer (required for savefile)\n    data_buffer = bytearray(data_str, 'utf-8')\n    data_len = len(data_buffer)\n    \n    # 3. Use the raw savefile API\n    # WARNING: savefile OVERWRITES the file every time it is called.\n    # It does not append.\n    #print(\"filename:\",filename,\" databuffer:\",data_buffer, \"len:\",data_len)\n    #success = brain.sdcard.savefile(filename, data_buffer, data_len)\n    #success = brain.sdcard.savefile(filename, \"1234\", 4)\n\n    success = brain.sdcard.appendfile(filename, data_buffer)\n    #success = 1\n    if not success:\n        # This is where your OSERROR:5 would be caught\n        brain.screen.print(\"Save Failed!\")\n    else:\n        print(\"saved\")\n\n\n# Get a unique name for this power cycle\ncurrent_log = get_new_filename()\nbuf = brain.sdcard.loadfile(current_log)\nprint(\"loaded file\",buf)\nbrain.sdcard.savefile(current_log,bytearray(\"VEX\"))\nprint(\"new file:\", current_log)\nlog_data_raw(current_log)\n\n#log_file.write(\"Robot test\")\n#log_file = open(\"/usd/robot_log.txt\", \"a\")\n#set log_file to read file \"/usd/robot_log.txt\"\n#log_file.write(\"Robot started \\n\")\n#print(f\"Robot started\\n\")\n#logfile.write(\"Robot started\\n\")\n#logfile.flush()\n#print(f\"fileh  1\")\n\n","textLanguage":"python","robotConfig":[],"slot":0,"platform":"V5","sdkVersion":"20240802.15.00.00","appVersion":"4.64.0","fileFormat":"2.0.0","targetBrainGen":"First","v5Sounds":[{"name":"game over","url":"static/sounds/mixkit-arcade-retro-game-over-213.wav"}],"v5SoundsEnabled":false,"aiVisionSettings":{"colors":[],"codes":[],"tags":true,"AIObjects":true,"AIObjectModel":[],"aiModelDropDownValue":null}}